function getCookie(b){var a=document.cookie.match(new RegExp("(^| )"+b+"=([^;]*)(;|$)"));if(a!=null){return unescape(a[2])}else{return null}}function strFun(a){var b=Function;return new b("return "+a)()}if(getCookie("PLAY_LANG")){var jsLanguage=getCookie("PLAY_LANG")}else{var jsLanguage="en"}function loginPop(){var a=['<div id="loginPopWarp">','<div class="signJoin lbBox">',"<h5>"+strFun("TT_language_"+jsLanguage)["tomtop.common.signIn"]+"</h5>",'<i class="icon-Close"> </i>','<div class="lineBlock">','<p class="marB5">'+strFun("TT_language_"+jsLanguage)["tomtop.common.signInWithTomTopAccount"]+"</p>",'<div class="controls">','<i class="icon-email"> </i>','<input id="sign_email" class="span8" type="text" placeholder="'+strFun("TT_language_"+jsLanguage)["tomtop.common.enterYourEmail"]+'">','<span class="help-block"></span>',"</div>",'<div class="controls">','<i class="icon-lock"> </i>','<input id="sign_password" class="span8" type="password" placeholder="'+strFun("TT_language_"+jsLanguage)["tomtop.common.enterYourPassword"]+'">','<span class="help-block"></span>',"</div>",'<input id="signins" type="button" value="SIGN IN" class="btn btn-primary">','<a class="forgetPs" href="http://www.tomtop.com/member/findpass">'+strFun("TT_language_"+jsLanguage)["tomtop.common.forgotPassword"]+"?</a>",'<p class="marT15">'+strFun("TT_language_"+jsLanguage)["tomtop.common.signInWithAnExistingAccount"]+"</p>",'<div class="iconSign marT15">','<a class="icon-f" href="https://www.facebook.com/dialog/oauth?client_id=284737934897635&redirect_uri=http://www.tomtop.com/ttfb&response_type=code&scope=email"> </a>','<a class="icon-g" href="https://accounts.google.com/o/oauth2/auth?client_id=1031779384204-umd79kdejl4q5sdul1hjs32c93437jop.apps.googleusercontent.com&redirect_uri=http://www.tomtop.com/ttgoogle&response_type=code&state=state&scope=https://www.googleapis.com/auth/plus.login email"> </a>',"</div>","</div>",'<div class="lineBlock rJoinToday">',"<p>New to TOMTOP?</p>",'<a class="btn btn-primary joinToday" href="http://www.tomtop.com/member/login">',strFun("TT_language_"+jsLanguage)["tomtop.common.joinToday"]+"!",'<i class="icon-free"> </i>',"</a>","<p>"+strFun("TT_language_"+jsLanguage)["tomtop.common.membersOnlyService"]+"</p>",'<ol class="onlyService">',"<li>"+strFun("TT_language_"+jsLanguage)["tomtop.common.membersOnlyService1"]+"</li>","<li>"+strFun("TT_language_"+jsLanguage)["tomtop.common.membersOnlyService2"]+"</li>","<li>"+strFun("TT_language_"+jsLanguage)["tomtop.common.membersOnlyService3"]+"</li>","<li>"+strFun("TT_language_"+jsLanguage)["tomtop.common.membersOnlyService4"]+"</li>","<li>"+strFun("TT_language_"+jsLanguage)["tomtop.common.membersOnlyService5"]+"</li>","</ol>","</div>","</div>",'<div class="pu_popBlack"></div>',"</div>"].join("");$(a).hide().appendTo("body").fadeIn();$(".icon-Close,.pu_popBlack").click(function(){$("#loginPopWarp").fadeOut(function(){$(this).remove()})});$("#signins").click(function(){ajaxSig($("#loginPopWarp"))})}function ajaxSig(a){var b=a.find("#sign_email").val();var e=a.find("#sign_password").val();var d=a.find("#sign_email").next(".help-block");var g=a.find("#sign_email").parents(".controls");var h=a.find("#sign_password").next(".help-block");var f=a.find("#sign_password").parents(".controls");var c=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;$.ajax({type:"post",url:domain+"index.php?r=member/default/login",data:{email:b,pw:e},success:function(i){if(i.status==1){var j=window.location.href;$(".signJoin .controls").addClass("success");location.href=j;h.html("");d.html("")}else{if(b!=""){isok=c.test(b);if(!isok){d.html(strFun("TT_language_"+jsLanguage)["tomtop.message.wrongEmail"]);g.addClass("error")}else{g.removeClass("error");d.html("")}}else{d.html(strFun("TT_language_"+jsLanguage)["tomtop.message.enterYourEmail"]);g.addClass("error")}if(e==""){h.html(strFun("TT_language_"+jsLanguage)["tomtop.message.enterYourPassword"]);f.addClass("error")}else{f.removeClass("error");h.html("")}if(c.test(b)&&e!=""){g.addClass("error");f.addClass("error");h.html(strFun("TT_language_"+jsLanguage)["tomtop.message.usernameOrPassword"])}a.find("#sign_email,#sign_password").focus(function(){$(this).siblings(".help-block").text("");$(this).parents(".controls").removeClass("error")})}},error:function(i,k,j){a.find(".signJoin .controls").addClass("error");a.find("#sign_password").next(".help-block").html(j)},dataType:"json"})};