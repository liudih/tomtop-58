$.fn.extend({mousewheel:function(a){return this.each(function(){var e=this;e.D=0;/webkit/.test(navigator.userAgent.toLowerCase())||/msie/.test(navigator.userAgent.toLowerCase())||$.support.safari?e.onmousewheel=function(){e.D=event.wheelDelta;event.returnValue=!1;a&&a.call(e)}:e.addEventListener("DOMMouseScroll",function(c){e.D=0<c.detail?-1:1;c.preventDefault();a&&a.call(e)},!1)})}});$.fn.extend({jscroll:function(a){return this.each(function(){function e(){b<d&&(b=d);b>f-g-d&&(b=f-g-d);k.css({top:b});m.css({top:-((b-d)*r/(f-2*d))})}a=a||{};a.Bar=a.Bar||{};a.Btn=a.Btn||{};a.Bar.Bg=a.Bar.Bg||{};a.Bar.Bd=a.Bar.Bd||{};a.Btn.uBg=a.Btn.uBg||{};a.Btn.dBg=a.Btn.dBg||{};a.W=a.W||"15px";a.BgUrl=a.BgUrl||"";a.Bg=a.Bg||"#efefef";a.Bar.Pos=a.Bar.Pos||"up";a.Bar.Bd.Out=a.Bar.Bd.Out||"#b5b5b5";a.Bar.Bd.Hover=a.Bar.Bd.Hover||"#ccc";a.Bar.Bg.Out=a.Bar.Bg.Out||"#fff";a.Bar.Bg.Hover=a.Bar.Bg.Hover||"#fff";a.Bar.Bg.Focus=a.Bar.Bg.Focus||"orange";a.Btn.btn=void 0!=a.Btn.btn?a.Btn.btn:!0;a.Btn.uBg.Out=a.Btn.uBg.Out||"#ccc";a.Btn.uBg.Hover=a.Btn.uBg.Hover||"#fff";a.Btn.uBg.Focus=a.Btn.uBg.Focus||"orange";a.Btn.dBg.Out=a.Btn.dBg.Out||"#ccc";a.Btn.dBg.Hover=a.Btn.dBg.Hover||"#fff";a.Btn.dBg.Focus=a.Btn.dBg.Focus||"orange";a.Fn=a.Fn||function(){};var c=this,v,n=0,h=0;$(c).css({overflow:"hidden",position:"relative",padding:"0px"});$(c).width();var f=$(c).height()-1,t=a.W?parseInt(a.W):21,d=1==a.Btn.btn?t:0;null==$(c).children(".jscroll-c").height()&&($(c).wrapInner("\x3cdiv class\x3d'jscroll-c' style\x3d'top:0px;z-index:9999;zoom:1;position:relative'\x3e\x3c/div\x3e"),$(c).children(".jscroll-c").prepend("\x3cdiv style\x3d'height:0px;overflow:hidden'\x3e\x3c/div\x3e"),$(c).append("\x3cdiv class\x3d'jscroll-e' unselectable\x3d'on' style\x3d' height:100%;top:0px;right:0;-moz-user-select:none;position:absolute;overflow:hidden;z-index:10000;'\x3e\x3cdiv class\x3d'jscroll-u' style\x3d'position:absolute;top:0px;width:100%;left:0;background:blue;overflow:hidden'\x3e\x3c/div\x3e\x3cdiv class\x3d'jscroll-h'  unselectable\x3d'on' style\x3d'background:green;position:absolute;left:0px;-moz-user-select:none;border:0px solid'\x3e\x3c/div\x3e\x3cdiv class\x3d'jscroll-d' style\x3d'position:absolute;bottom:0px;width:100%;left:0;background:blue;overflow:hidden'\x3e\x3c/div\x3e\x3c/div\x3e"));var m=$(c).children(".jscroll-c"),l=$(c).children(".jscroll-e"),k=l.children(".jscroll-h"),p=l.children(".jscroll-u"),q=l.children(".jscroll-d");$.support.msie&&document.execCommand("BackgroundImageCache",!1,!0);m.css({"padding-right":t});l.css({width:t,background:a.Bg,"background-image":a.BgUrl});k.css({top:d,background:a.Bar.Bg.Out,"background-image":a.BgUrl,"border-color":a.Bar.Bd.Out,width:t-6});p.css({height:d,background:a.Btn.uBg.Out,"background-image":a.BgUrl});q.css({height:d,background:a.Btn.dBg.Out,"background-image":a.BgUrl});k.hover(function(){0==h&&$(this).css({background:a.Bar.Bg.Hover,"background-image":a.BgUrl,"border-color":a.Bar.Bd.Hover})},function(){0==h&&$(this).css({background:a.Bar.Bg.Out,"background-image":a.BgUrl,"border-color":a.Bar.Bd.Out})});p.hover(function(){0==h&&$(this).css({background:a.Btn.uBg.Hover,"background-image":a.BgUrl})},function(){0==h&&$(this).css({background:a.Btn.uBg.Out,"background-image":a.BgUrl})});q.hover(function(){0==h&&$(this).css({background:a.Btn.dBg.Hover,"background-image":a.BgUrl})},function(){0==h&&$(this).css({background:a.Btn.dBg.Out,"background-image":a.BgUrl})});var r=m.height(),g=(f-2*d)*f/r;10>g&&(g=10);var u=g/6,b=0,w=!1;k.height(g);r<=f?(m.css({padding:0}),l.css({display:"none"})):w=!0;"up"!=a.Bar.Pos&&(b=f-g-d,e());k.bind("mousedown",function(d){a.Fn&&a.Fn.call(c);h=1;k.css({background:a.Bar.Bg.Focus,"background-image":a.BgUrl});var f=d.pageY,g=parseInt($(this).css("top"));$(document).mousemove(function(a){b=g+a.pageY-f;e()});$(document).mouseup(function(){h=0;k.css({background:a.Bar.Bg.Out,"background-image":a.BgUrl,"border-color":a.Bar.Bd.Out});$(document).unbind()});return!1});p.bind("mousedown",function(b){a.Fn&&a.Fn.call(c);h=1;p.css({background:a.Btn.uBg.Focus,"background-image":a.BgUrl});c.timeSetT("u");$(document).mouseup(function(){h=0;p.css({background:a.Btn.uBg.Out,"background-image":a.BgUrl});$(document).unbind();clearTimeout(v);n=0});return!1});q.bind("mousedown",function(b){a.Fn&&a.Fn.call(c);h=1;q.css({background:a.Btn.dBg.Focus,"background-image":a.BgUrl});c.timeSetT("d");$(document).mouseup(function(){h=0;q.css({background:a.Btn.dBg.Out,"background-image":a.BgUrl});$(document).unbind();clearTimeout(v);n=0});return!1});c.timeSetT=function(a){var c=this;b="u"==a?b-u:b+u;e();n+=2;var d=500-50*n;0>=d&&(d=0);v=setTimeout(function(){c.timeSetT(a)},d)};l.bind("mousedown",function(e){a.Fn&&a.Fn.call(c);b=b+e.pageY-k.offset().top-g/2;b<d&&(b=d);b>f-g-d&&(b=f-g-d);k.stop().animate({top:b},100);e=-((b-d)*r/(f-2*d));m.stop().animate({top:e},1E3);return!1});$(c).mousewheel(function(){1==w&&(a.Fn&&a.Fn.call(c),b=0<this.D?b-u:b+u,e())})})}});