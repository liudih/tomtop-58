$(function(){$(".dirSelectList").click(function(){$(this).toggleClass("selectOrange");$(this).children(".multi-select").toggleClass("multiAci")});$(".icon-showBlock").click(function(){$(this).addClass("active");$(".icon-showList").removeClass("active");$(".categoryProductList").addClass("categoryProductBlock")});$(".icon-showList").click(function(){$(this).addClass("active");$(".icon-showBlock").removeClass("active");$(".categoryProductList").removeClass("categoryProductBlock")});$(".selectWarp").click(function(d){$(this).toggleClass("active");if($(this).hasClass("active")){$(this).children(".selectValue").show()}else{$(this).children(".selectValue").hide()}d.stopPropagation()});$(".selectValue li").click(function(){var d=$(this).text();var g=$(this).attr("data-rel");var e=window.location.href;$(".selectTxt").text(d);if(e.indexOf("&p=")!=-1||e.indexOf("?p=")!=-1){if(e.indexOf("?")==-1){var f=e+"?sort="+g;var h=changeURLArg(f,"p",1);window.location=h}else{if(e.indexOf("?")!=-1&&e.indexOf("?sort")==-1&&e.indexOf("&sort=")==-1){var f=e+"&sort="+g;var h=changeURLArg(f,"p",1);window.location=h}else{var f=changeURLArg(e,"sort",g);var h=changeURLArg(f,"p",1);window.location=h}}}else{if(e.indexOf("?")==-1){window.location=e+"?sort="+g}else{if(e.indexOf("?")!=-1&&e.indexOf("?sort")==-1&&e.indexOf("&sort=")==-1){window.location=e+"&sort="+g}else{window.location=changeURLArg(e,"sort",g)}}}});var b=$(".selectValue").children(".active").text();$(".selectTxt").text(b);$("body").click(function(d){$(".selectValue").hide();$(".selectWarp ").removeClass("active");d.stopPropagation()});var c=[];var a=[];$(".warehouseList span").click(function(){var p=getCookie("TT_CURR");var r=currencyLabel[p];var n=currencyRate[p];var i=parseJSON($(this).attr("data"));var k=$(this).parents(".productClass");var l=k.find(".productCost");var j=k.find(".productPrice");var m=$(this).attr("us-origprice");var q=$(this).attr("us-nowprice");var o=k.find(".likes").attr("data-rel");$.each(i,function(u,v){depotName=i.depotName;freeShipping=i.freeShipping});if(getCookie("TT_WAREHOUSE")){var t=getCookie("TT_WAREHOUSE");var g=parseJSON(t);var e=[];var d=[];var h=[];$.each(g,function(u,v){$.each(v,function(w,x){a.push(v.listingId);if(v[w]==o){d={listingId:o,depotName:depotName};h.push(JSON.stringify(d));return false}else{e={listingId:v.listingId,depotName:v.depotName};h.push(JSON.stringify(e));return false}})});if($.inArray(o,a)==-1){c.push(JSON.stringify({listingId:o,depotName:depotName}))}}else{c=[];c.push(JSON.stringify({listingId:o,depotName:depotName}))}if($.inArray(o,a)!=-1&&getCookie("TT_WAREHOUSE")){delCookie("TT_WAREHOUSE");temCookie("TT_WAREHOUSE",h)}else{temCookie("TT_WAREHOUSE",c)}if(freeShipping==true){var s=$(this).parents(".productClass");s.find(".freeShipping").show()}else{var s=$(this).parents(".productClass");s.find(".freeShipping").hide()}l.text(r+switchPrice(m,n));j.text(r+switchPrice(q,n));l.attr("usvalue",m);j.attr("usvalue",q);if(m==q){var s=$(this).parents(".productClass");s.find(".productCost").hide();s.find(".icon-sale").hide()}else{var s=$(this).parents(".productClass");var f=100-Math.round(q/m*100);s.find(".productCost").show();s.find(".icon-sale").show().text(f)}$(this).siblings().removeClass("active");$(this).addClass("active")})});$(function(){$(".dirToggle").each(function(){var a=$(this).height();if(a>131){$(this).css({height:"130px"});$(this).after("<a class='scrMore' href='javascript:;'>"+strFun("TT_language_"+jsLanguage)["tomtop.common.viewMore"]+"<i class='icon-GrLtArr'></i></a>")}});$(".scrMore").click(function(){var b=$(this).prev(".dirToggle").children("a");var a=b.length*b.outerHeight(true);if($(this).hasClass("scrLess")==false){$(this).prev(".dirToggle").animate({height:a});$(this).html("View Less<i class='icon-jArr'></i>")}else{$(this).prev(".dirToggle").animate({height:130});$(this).html("View More<i class='icon-GrLtArr'></i>")}$(this).toggleClass("scrLess")});$(".radioA").click(function(){$(this).addClass("radioSelect");$(this).siblings().removeClass("radioSelect")})});$(function(){$(".likes").click(function(){if($("#logout").length==1){var a=$(this).children(".addHeartNum");var d=$(this).attr("data-rel");var c=getCookie("TT_UUID");var b={listingId:d,TT_UUID:c};$.post(domain+"index.php?r=details/default/ajaxcollect",b,function(e){if(e.status==1){a.text(parseInt(a.text())+1)}else{Dialog(function(){var f=$(this).parents(".pu_pop");f.fadeOut(function(){f.remove()})},strFun("TT_language_"+jsLanguage)["tomtop.common.tip"],e.msg)}},"json")}else{loginPop()}})});